@inject IJSRuntime JSRuntime
@inject RenderLocation RenderLocation

@if(RenderLocation is ClientRenderLocation)
{
    <input type="hidden" id="__RequestVerificationToken" name="__RequestVerificationToken" value="@GetToken()">
}

@code {
    private string token = "";

    protected override async Task OnInitializedAsync()
    {
        if (RenderLocation is ClientRenderLocation)
        {
            token = await JSRuntime.InvokeAsync<string>("getAntiForgeryToken");
        }
    }

    public string GetToken()
    {
        return token;
    }
}
