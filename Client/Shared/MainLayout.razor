@inherits LayoutComponentBase

<nav class="flex justify-center bg-gray-200 w-full min-w-[--content-min-width] dark:bg-gray-500">
  <div class="flex justify-between w-full max-w-[--content-max-width] items-center">
    <div class="ml-4 flex items-center select-none">
      <a href="/"><img width="48" src="/cart128.png" alt="Logo" /></a>
      <h3 class="font-bold text-xl dark:text-gray-100">Grocery List Helper</h3>
    </div>
    @if (loggedInUserInfo?.IsAuthenticated == true)
    {
      <div class="relative z-20 m-4">
        <button class="bg-green-400 border-2 border-green-600 w-9 h-9 rounded-full hover:bg-green-500" @onclick="ToggleUserMenuOpen">@GetUserInitials(loggedInUserInfo)</button>
        @if (userMenuOpen)
        {
          <div class="absolute border-2 border-white rounded-lg right-0 bg-gray-800 text-white p-2">
            @if (loggedInUserInfo?.Claims?.FirstOrDefault(x => x.Type == "name")?.Value is string name)
            {
              <p>@name</p>
            }
            @if (loggedInUserInfo?.Claims?.FirstOrDefault(x => x.Type == "preferred_username")?.Value is string email)
            {
              <p>@email</p>
            }
            <a href="">
              <svg class="inline w-4 invert" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                <path d="M152.1 38.2c9.9 8.9 10.7 24 1.8 33.9l-72 80c-4.4 4.9-10.6 7.8-17.2 7.9s-12.9-2.4-17.6-7L7 113C-2.3 103.6-2.3 88.4 7 79s24.6-9.4 33.9 0l22.1 22.1 55.1-61.2c8.9-9.9 24-10.7 33.9-1.8zm0 160c9.9 8.9 10.7 24 1.8 33.9l-72 80c-4.4 4.9-10.6 7.8-17.2 7.9s-12.9-2.4-17.6-7L7 273c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l22.1 22.1 55.1-61.2c8.9-9.9 24-10.7 33.9-1.8zM224 96c0-17.7 14.3-32 32-32H480c17.7 0 32 14.3 32 32s-14.3 32-32 32H256c-17.7 0-32-14.3-32-32zm0 160c0-17.7 14.3-32 32-32H480c17.7 0 32 14.3 32 32s-14.3 32-32 32H256c-17.7 0-32-14.3-32-32zM160 416c0-17.7 14.3-32 32-32H480c17.7 0 32 14.3 32 32s-14.3 32-32 32H192c-17.7 0-32-14.3-32-32zM48 368a48 48 0 1 1 0 96 48 48 0 1 1 0-96z" />
              </svg>
              <span class="font-semibold hover:text-gray-400 hover:underline">My Cart</span>
            </a>
            <a href="managegroups" class="block font-semibold hover:text-gray-400 hover:underline">
              <svg class="inline invert w-4 mb-1" xmlns=" http://www.w3.org/2000/svg" viewBox="0 0 640 512">
                <path d="M335.5 4l288 160c15.4 8.6 21 28.1 12.4 43.5s-28.1 21-43.5 12.4L320 68.6 47.5 220c-15.4 8.6-34.9 3-43.5-12.4s-3-34.9 12.4-43.5L304.5 4c9.7-5.4 21.4-5.4 31.1 0zM320 160a40 40 0 1 1 0 80 40 40 0 1 1 0-80zM144 256a40 40 0 1 1 0 80 40 40 0 1 1 0-80zm312 40a40 40 0 1 1 80 0 40 40 0 1 1 -80 0zM226.9 491.4L200 441.5V480c0 17.7-14.3 32-32 32H120c-17.7 0-32-14.3-32-32V441.5L61.1 491.4c-6.3 11.7-20.8 16-32.5 9.8s-16-20.8-9.8-32.5l37.9-70.3c15.3-28.5 45.1-46.3 77.5-46.3h19.5c16.3 0 31.9 4.5 45.4 12.6l33.6-62.3c15.3-28.5 45.1-46.3 77.5-46.3h19.5c32.4 0 62.1 17.8 77.5 46.3l33.6 62.3c13.5-8.1 29.1-12.6 45.4-12.6h19.5c32.4 0 62.1 17.8 77.5 46.3l37.9 70.3c6.3 11.7 1.9 26.2-9.8 32.5s-26.2 1.9-32.5-9.8L552 441.5V480c0 17.7-14.3 32-32 32H472c-17.7 0-32-14.3-32-32V441.5l-26.9 49.9c-6.3 11.7-20.8 16-32.5 9.8s-16-20.8-9.8-32.5l36.3-67.5c-1.7-1.7-3.2-3.6-4.3-5.8L376 345.5V400c0 17.7-14.3 32-32 32H296c-17.7 0-32-14.3-32-32V345.5l-26.9 49.9c-1.2 2.2-2.6 4.1-4.3 5.8l36.3 67.5c6.3 11.7 1.9 26.2-9.8 32.5s-26.2 1.9-32.5-9.8z" />
              </svg>
              <span class="pt-2">Manage Groups</span>
            </a>
            <form method="post" action="api/Account/Logout">
              <AntiForgeryTokenInput />
              <button class="font-semibold hover:text-gray-400 hover:underline" type="submit">
                <i class="fa fa-sign-out" aria-hidden="true"></i>
                Sign Out
              </button>
            </form>
          </div>
        }
      </div>
    }
    else
    {
      <a id="login-link" class="text-blue-700 text-lg mx-4 align-middle" href="api/Account/Login">Log in</a>
    }
  </div>
</nav>

<main class="min-h-full bg-[url('../store-transparent.webp')] min-w-[--content-min-width] bg-cover">
  <div class="bg-gray-100 mx-auto max-w-[--content-max-width] dark:bg-gray-800 dark:text-white">
    @Body
  </div>
</main>

<Modal />

